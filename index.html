<!DOCTYPE html PUBLIC "-//WC3//DTD XHTML 1.0 Strict//EN"

	http://www.w3.org/TR/xhmtl1/DTS/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

	<head>

		<title>STACK Ad Server</title>

		  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		  <meta name="viewport" content="width=device-width, initial-scale=1">

		  <style>
		  	#viddy {
		  		display: none;
		  		cursor: pointer;
		  	}

		  	.wally {
		  		display: none;
		  	}
		  </style>
	</head>

	<body> 
			<script language="javascript" type="text/javascript">
		
				var viddy;
						
				$.ajax({
				        type: 'GET',
				        //url: 'http://localhost:8081/test?callback=jsonpCallback',
				        url: 'http://adserver-env-poly.elasticbeanstalk.com/test?callback=jsonpCallback',
				        crossDomain: true,
				        async: false,
				        jsonpCallback: 'jsonpCallback',
				        dataType: 'jsonp',
				        jsonp: false,
				        contentType:'application/json',
				        success: function(data) {  

				        	console.log("received new data: " , data );      

					         viddy = data.url;
					         adid = data.adId;
					         adUnit = data.adUnit;

					         console.log("Our Viddy: " + viddy );

					         document.write('<div id="viddy" class="wally">TEST<h3>Local Ad of the Day - REMOTE</h3><video class="wally" width="320" height="240" autoplay><source src="'+ viddy +'" type="video/mp4"></video></div>');

					        document.writeln('<br/>AdId: ' + adid + '<br/>');

					        document.writeln('Ad Unit: ' + adUnit + '<br/>');

					        document.writeln('Location: ' + viddy + '<br/>');

				        }
				    });


		 function jsonpCallback(json) {
		        if (!json.Error) {
		           console.log('Json Data from endpoint: ' , json );
		        }
		        else {
		            alert(json.Message);
		        }
		    }//end Jsonp Callback


		    // onClick I want something exciting to happen

		    $( "#viddy" ).click(function() {
  				alert( "Handler for .click() called." );
				});

			</script>
			<noscript>
				<h3>Sorry...you need javascript</h3>
			</noscript>

	<div id="viasdddy">Video Goes here... </div>

	</body>
</html>

